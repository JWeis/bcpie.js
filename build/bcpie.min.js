var doc=document,body=$(doc.body),win=window;win.bcpie={active:{bcpieSDK:"2015.01.31",tricks:{}},globals:{path:win.location.pathname.toLowerCase(),pathArray:win.location.pathname.toLowerCase().split(/(?=\/#?[a-zA-Z0-9])/g),param:win.location.search,paramArray:win.location.search.split(/(?=&#?[a-zA-Z0-9])/g),hash:win.location.hash,countries:{AF:{Country:"Afghanistan",ContinentCode:"AS",Continent:"Asia"},AX:{Country:"Aland Islands",ContinentCode:"EU",Continent:"Europe"},AL:{Country:"Albania",ContinentCode:"EU",Continent:"Europe"},DZ:{Country:"Algeria",ContinentCode:"AF",Continent:"Africa"},AS:{Country:"American Samoa",ContinentCode:"OC",Continent:"Oceania"},AD:{Country:"Andorra",ContinentCode:"EU",Continent:"Europe"},AO:{Country:"Angola",ContinentCode:"AF",Continent:"Africa"},AI:{Country:"Anguilla",ContinentCode:"NA",Continent:"North America"},AQ:{Country:"Antarctica",ContinentCode:"AN",Continent:"Antartica"},AG:{Country:"Antigua and Barbuda",ContinentCode:"NA",Continent:"North America"},AR:{Country:"Argentina",ContinentCode:"SA",Continent:"South America"},AM:{Country:"Armenia",ContinentCode:"AS",Continent:"Asia"},AW:{Country:"Aruba",ContinentCode:"NA",Continent:"North America"},AU:{Country:"Australia",ContinentCode:"OC",Continent:"Oceania"},AT:{Country:"Austria",ContinentCode:"EU",Continent:"Europe"},AZ:{Country:"Azerbaijan",ContinentCode:"AS",Continent:"Asia"},BS:{Country:"Bahamas",ContinentCode:"NA",Continent:"North America"},BH:{Country:"Bahrain",ContinentCode:"AS",Continent:"Asia"},BD:{Country:"Bangladesh",ContinentCode:"AS",Continent:"Asia"},BB:{Country:"Barbados",ContinentCode:"NA",Continent:"North America"},BY:{Country:"Belarus",ContinentCode:"EU",Continent:"Europe"},BE:{Country:"Belgium",ContinentCode:"EU",Continent:"Europe"},BZ:{Country:"Belize",ContinentCode:"NA",Continent:"North America"},BJ:{Country:"Benin",ContinentCode:"AF",Continent:"Africa"},BM:{Country:"Bermuda",ContinentCode:"NA",Continent:"North America"},BT:{Country:"Bhutan",ContinentCode:"AS",Continent:"Asia"},BO:{Country:"Bolivia",ContinentCode:"SA",Continent:"South America"},BA:{Country:"Bosnia and Herzegovina",ContinentCode:"EU",Continent:"Europe"},BW:{Country:"Botswana",ContinentCode:"AF",Continent:"Africa"},BV:{Country:"Bouvet Island",ContinentCode:"AN",Continent:"Antartica"},BR:{Country:"Brazil",ContinentCode:"SA",Continent:"South America"},IO:{Country:"British Indian Ocean Territory",ContinentCode:"AS",Continent:"Asia"},VG:{Country:"British Virgin Islands",ContinentCode:"NA",Continent:"North America"},BN:{Country:"Brunei Darussalam",ContinentCode:"AS",Continent:"Asia"},BG:{Country:"Bulgaria",ContinentCode:"EU",Continent:"Europe"},BF:{Country:"Burkina Faso",ContinentCode:"AF",Continent:"Africa"},BI:{Country:"Burundi",ContinentCode:"AF",Continent:"Africa"},KH:{Country:"Cambodia",ContinentCode:"AS",Continent:"Asia"},CM:{Country:"Cameroon",ContinentCode:"AF",Continent:"Africa"},CA:{Country:"Canada",ContinentCode:"NA",Continent:"North America"},CV:{Country:"Cape Verde",ContinentCode:"AF",Continent:"Africa"},KY:{Country:"Cayman Islands",ContinentCode:"NA",Continent:"North America"},CF:{Country:"Central African Republic",ContinentCode:"AF",Continent:"Africa"},TD:{Country:"Chad",ContinentCode:"AF",Continent:"Africa"},CL:{Country:"Chile",ContinentCode:"SA",Continent:"South America"},CN:{Country:"China",ContinentCode:"AS",Continent:"Asia"},CX:{Country:"Christmas Island",ContinentCode:"AS",Continent:"Asia"},CC:{Country:"Cocos (Keeling) Islands",ContinentCode:"AS",Continent:"Asia"},CO:{Country:"Colombia",ContinentCode:"SA",Continent:"South America"},KM:{Country:"Comoros",ContinentCode:"AF",Continent:"Africa"},CG:{Country:"Congo",ContinentCode:"AF",Continent:"Africa"},CD:{Country:"Congo, Democratic Republic of the",ContinentCode:"AF",Continent:"Africa"},CK:{Country:"Cook Islands",ContinentCode:"OC",Continent:"Oceania"},CR:{Country:"Costa Rica",ContinentCode:"NA",Continent:"North America"},HR:{Country:"Croatia",ContinentCode:"EU",Continent:"Europe"},CY:{Country:"Cyprus",ContinentCode:"AS",Continent:"Asia"},CZ:{Country:"Czech Republic",ContinentCode:"EU",Continent:"Europe"},DK:{Country:"Denmark",ContinentCode:"EU",Continent:"Europe"},DJ:{Country:"Djibouti",ContinentCode:"AF",Continent:"Africa"},DM:{Country:"Dominica",ContinentCode:"NA",Continent:"North America"},DO:{Country:"Dominican Republic",ContinentCode:"NA",Continent:"North America"},TL:{Country:"East Timor",ContinentCode:"AS",Continent:"Asia"},EC:{Country:"Ecuador",ContinentCode:"SA",Continent:"South America"},EG:{Country:"Egypt",ContinentCode:"AF",Continent:"Africa"},SV:{Country:"El Salvador",ContinentCode:"NA",Continent:"North America"},GQ:{Country:"Equatorial Guinea",ContinentCode:"AF",Continent:"Africa"},ER:{Country:"Eritrea",ContinentCode:"AF",Continent:"Africa"},EE:{Country:"Estonia",ContinentCode:"EU",Continent:"Europe"},ET:{Country:"Ethiopia",ContinentCode:"AF",Continent:"Africa"},FK:{Country:"Falkland Islands",ContinentCode:"SA",Continent:"South America"},FO:{Country:"Faroe Islands",ContinentCode:"EU",Continent:"Europe"},FJ:{Country:"Fiji",ContinentCode:"OC",Continent:"Oceania"},FI:{Country:"Finland",ContinentCode:"EU",Continent:"Europe"},FR:{Country:"France",ContinentCode:"EU",Continent:"Europe"},GF:{Country:"French Guiana",ContinentCode:"SA",Continent:"South America"},PF:{Country:"French Polynesia",ContinentCode:"OC",Continent:"Oceania"},TF:{Country:"French Southern Territories",ContinentCode:"AN",Continent:"Antartica"},GA:{Country:"Gabon",ContinentCode:"AF",Continent:"Africa"},GM:{Country:"Gambia",ContinentCode:"AF",Continent:"Africa"},GE:{Country:"Georgia",ContinentCode:"AS",Continent:"Asia"},DE:{Country:"Germany",ContinentCode:"EU",Continent:"Europe"},GH:{Country:"Ghana",ContinentCode:"AF",Continent:"Africa"},GI:{Country:"Gibraltar",ContinentCode:"EU",Continent:"Europe"},GR:{Country:"Greece",ContinentCode:"EU",Continent:"Europe"},GL:{Country:"Greenland",ContinentCode:"NA",Continent:"North America"},GD:{Country:"Grenada",ContinentCode:"NA",Continent:"North America"},GP:{Country:"Guadeloupe",ContinentCode:"NA",Continent:"North America"},GU:{Country:"Guam",ContinentCode:"OC",Continent:"Oceania"},GT:{Country:"Guatemala",ContinentCode:"NA",Continent:"North America"},GG:{Country:"Guernsey",ContinentCode:"EU",Continent:"Europe"},GN:{Country:"Guinea",ContinentCode:"AF",Continent:"Africa"},GW:{Country:"Guinea-Bissau",ContinentCode:"AF",Continent:"Africa"},GY:{Country:"Guyana",ContinentCode:"SA",Continent:"South America"},HT:{Country:"Haiti",ContinentCode:"NA",Continent:"North America"},HM:{Country:"Heard Island and McDonald Islands",ContinentCode:"AN",Continent:"Antartica"},VA:{Country:"Holy See (Vatican City-State)",ContinentCode:"EU",Continent:"Europe"},HN:{Country:"Honduras",ContinentCode:"NA",Continent:"North America"},HK:{Country:"Hong Kong SAR",ContinentCode:"AS",Continent:"Asia"},HU:{Country:"Hungary",ContinentCode:"EU",Continent:"Europe"},IS:{Country:"Iceland",ContinentCode:"EU",Continent:"Europe"},IN:{Country:"India",ContinentCode:"AS",Continent:"Asia"},ID:{Country:"Indonesia",ContinentCode:"AS",Continent:"Asia"},IQ:{Country:"Iraq",ContinentCode:"AS",Continent:"Asia"},IE:{Country:"Ireland",ContinentCode:"EU",Continent:"Europe"},IL:{Country:"Israel",ContinentCode:"AS",Continent:"Asia"},IT:{Country:"Italy",ContinentCode:"EU",Continent:"Europe"},CI:{Country:"Ivory Coast",ContinentCode:"AF",Continent:"Africa"},JM:{Country:"Jamaica",ContinentCode:"NA",Continent:"North America"},JP:{Country:"Japan",ContinentCode:"AS",Continent:"Asia"},JE:{Country:"Jersey",ContinentCode:"EU",Continent:"Europe"},JO:{Country:"Jordan",ContinentCode:"AS",Continent:"Asia"},KZ:{Country:"Kazakhstan",ContinentCode:"AS",Continent:"Asia"},KE:{Country:"Kenya",ContinentCode:"AF",Continent:"Africa"},KI:{Country:"Kiribati",ContinentCode:"OC",Continent:"Oceania"},KR:{Country:"Korea, Republic Of",ContinentCode:"AS",Continent:"Asia"},KW:{Country:"Kuwait",ContinentCode:"AS",Continent:"Asia"},KG:{Country:"Kyrgyzstan",ContinentCode:"AS",Continent:"Asia"},LA:{Country:"Laos",ContinentCode:"AS",Continent:"Asia"},LV:{Country:"Latvia",ContinentCode:"EU",Continent:"Europe"},LB:{Country:"Lebanon",ContinentCode:"AS",Continent:"Asia"},LS:{Country:"Lesotho",ContinentCode:"AF",Continent:"Africa"},LR:{Country:"Liberia",ContinentCode:"AF",Continent:"Africa"},LY:{Country:"Libya",ContinentCode:"AF",Continent:"Africa"},LI:{Country:"Liechtenstein",ContinentCode:"EU",Continent:"Europe"},LT:{Country:"Lithuania",ContinentCode:"EU",Continent:"Europe"},LU:{Country:"Luxembourg",ContinentCode:"EU",Continent:"Europe"},MO:{Country:"Macao SAR",ContinentCode:"AS",Continent:"Asia"},MK:{Country:"Macedonia, Former Yugoslav Republic of",ContinentCode:"EU",Continent:"Europe"},MG:{Country:"Madagascar",ContinentCode:"AF",Continent:"Africa"},MW:{Country:"Malawi",ContinentCode:"AF",Continent:"Africa"},MY:{Country:"Malaysia",ContinentCode:"AS",Continent:"Asia"},MV:{Country:"Maldives",ContinentCode:"AS",Continent:"Asia"},ML:{Country:"Mali",ContinentCode:"AF",Continent:"Africa"},MT:{Country:"Malta",ContinentCode:"EU",Continent:"Europe"},MH:{Country:"Marshall Islands",ContinentCode:"OC",Continent:"Oceania"},MQ:{Country:"Martinique",ContinentCode:"NA",Continent:"North America"},MR:{Country:"Mauritania",ContinentCode:"AF",Continent:"Africa"},MU:{Country:"Mauritius",ContinentCode:"AF",Continent:"Africa"},YT:{Country:"Mayotte",ContinentCode:"AF",Continent:"Africa"},MX:{Country:"Mexico",ContinentCode:"NA",Continent:"North America"},FM:{Country:"Micronesia, Federated States of",ContinentCode:"OC",Continent:"Oceania"},MD:{Country:"Moldova",ContinentCode:"EU",Continent:"Europe"},MC:{Country:"Monaco",ContinentCode:"EU",Continent:"Europe"},MN:{Country:"Mongolia",ContinentCode:"AS",Continent:"Asia"},ME:{Country:"Montenegro",ContinentCode:"EU",Continent:"Europe"},MS:{Country:"Montserrat",ContinentCode:"NA",Continent:"North America"},MA:{Country:"Morocco",ContinentCode:"AF",Continent:"Africa"},MZ:{Country:"Mozambique",ContinentCode:"AF",Continent:"Africa"},MM:{Country:"Myanmar",ContinentCode:"AS",Continent:"Asia"},NA:{Country:"Namibia",ContinentCode:"AF",Continent:"Africa"},NR:{Country:"Nauru",ContinentCode:"OC",Continent:"Oceania"},NP:{Country:"Nepal",ContinentCode:"AS",Continent:"Asia"},NL:{Country:"Netherlands",ContinentCode:"EU",Continent:"Europe"},AN:{Country:"Netherlands Antilles",ContinentCode:"NA",Continent:"North America"},NC:{Country:"New Caledonia",ContinentCode:"OC",Continent:"Oceania"},NZ:{Country:"New Zealand",ContinentCode:"OC",Continent:"Oceania"},NI:{Country:"Nicaragua",ContinentCode:"NA",Continent:"North America"},NE:{Country:"Niger",ContinentCode:"AF",Continent:"Africa"},NG:{Country:"Nigeria",ContinentCode:"AF",Continent:"Africa"},NU:{Country:"Niue",ContinentCode:"OC",Continent:"Oceania"},NF:{Country:"Norfolk Island",ContinentCode:"OC",Continent:"Oceania"},MP:{Country:"Northern Mariana Islands",ContinentCode:"OC",Continent:"Oceania"},NO:{Country:"Norway",ContinentCode:"EU",Continent:"Europe"},OM:{Country:"Oman",ContinentCode:"AS",Continent:"Asia"},PK:{Country:"Pakistan",ContinentCode:"AS",Continent:"Asia"},PW:{Country:"Palau",ContinentCode:"OC",Continent:"Oceania"},PS:{Country:"Palestine",ContinentCode:"AS",Continent:"Asia"},PA:{Country:"Panama",ContinentCode:"NA",Continent:"North America"},PG:{Country:"Papua New Guinea",ContinentCode:"OC",Continent:"Oceania"},PY:{Country:"Paraguay",ContinentCode:"SA",Continent:"South America"},PE:{Country:"Peru",ContinentCode:"SA",Continent:"South America"},PH:{Country:"Philippines",ContinentCode:"AS",Continent:"Asia"},PN:{Country:"Pitcairn Islands",ContinentCode:"OC",Continent:"Oceania"},PL:{Country:"Poland",ContinentCode:"EU",Continent:"Europe"},PT:{Country:"Portugal",ContinentCode:"EU",Continent:"Europe"},PR:{Country:"Puerto Rico",ContinentCode:"NA",Continent:"North America"},QA:{Country:"Qatar",ContinentCode:"AS",Continent:"Asia"},RE:{Country:"Reunion",ContinentCode:"AF",Continent:"Africa"},RO:{Country:"Romania",ContinentCode:"EU",Continent:"Europe"},RU:{Country:"Russian Federation",ContinentCode:"EU",Continent:"Europe"},RW:{Country:"Rwanda",ContinentCode:"AF",Continent:"Africa"},BL:{Country:"Saint Barthélemy",ContinentCode:"NA",Continent:"North America"},WS:{Country:"Samoa",ContinentCode:"OC",Continent:"Oceania"},SM:{Country:"San Marino",ContinentCode:"EU",Continent:"Europe"},ST:{Country:"Sao Tome and Principe",ContinentCode:"AF",Continent:"Africa"},SA:{Country:"Saudi Arabia",ContinentCode:"AS",Continent:"Asia"},SN:{Country:"Senegal",ContinentCode:"AF",Continent:"Africa"},RS:{Country:"Serbia",ContinentCode:"EU",Continent:"Europe"},CS:{Country:"Serbia and Montenegro",ContinentCode:"EU",Continent:"Europe"},SC:{Country:"Seychelles",ContinentCode:"AF",Continent:"Africa"},SL:{Country:"Sierra Leone",ContinentCode:"AF",Continent:"Africa"},SG:{Country:"Singapore",ContinentCode:"AS",Continent:"Asia"},SK:{Country:"Slovakia",ContinentCode:"EU",Continent:"Europe"},SI:{Country:"Slovenia",ContinentCode:"EU",Continent:"Europe"},SB:{Country:"Solomon Islands",ContinentCode:"OC",Continent:"Oceania"},SO:{Country:"Somalia",ContinentCode:"AF",Continent:"Africa"},ZA:{Country:"South Africa",ContinentCode:"AF",Continent:"Africa"},GS:{Country:"South Georgia and the South Sandwich Islands",ContinentCode:"AN",Continent:"Antartica"},ES:{Country:"Spain",ContinentCode:"EU",Continent:"Europe"},LK:{Country:"Sri Lanka",ContinentCode:"AS",Continent:"Asia"},SH:{Country:"St. Helena",ContinentCode:"AF",Continent:"Africa"},KN:{Country:"St. Kitts and Nevis",ContinentCode:"NA",Continent:"North America"},LC:{Country:"St. Lucia",ContinentCode:"NA",Continent:"North America"},MF:{Country:"St. Martin",ContinentCode:"NA",Continent:"North America"},PM:{Country:"St. Pierre and Miquelon",ContinentCode:"NA",Continent:"North America"},VC:{Country:"St. Vincent and the Grenadines",ContinentCode:"NA",Continent:"North America"},SR:{Country:"Suriname",ContinentCode:"SA",Continent:"South America"},SJ:{Country:"Svalbard and Jan Mayen",ContinentCode:"EU",Continent:"Europe"},SZ:{Country:"Swaziland",ContinentCode:"AF",Continent:"Africa"},SE:{Country:"Sweden",ContinentCode:"EU",Continent:"Europe"},CH:{Country:"Switzerland",ContinentCode:"EU",Continent:"Europe"},TW:{Country:"Taiwan",ContinentCode:"AS",Continent:"Asia"},TJ:{Country:"Tajikistan",ContinentCode:"AS",Continent:"Asia"},TZ:{Country:"Tanzania",ContinentCode:"AF",Continent:"Africa"},TH:{Country:"Thailand",ContinentCode:"AS",Continent:"Asia"},TG:{Country:"Togo",ContinentCode:"AF",Continent:"Africa"},TK:{Country:"Tokelau",ContinentCode:"OC",Continent:"Oceania"},TO:{Country:"Tonga",ContinentCode:"OC",Continent:"Oceania"},TT:{Country:"Trinidad and Tobago",ContinentCode:"NA",Continent:"North America"},TN:{Country:"Tunisia",ContinentCode:"AF",Continent:"Africa"},TR:{Country:"Turkey",ContinentCode:"EU",Continent:"Europe"},TM:{Country:"Turkmenistan",ContinentCode:"AS",Continent:"Asia"},TC:{Country:"Turks and Caicos Islands",ContinentCode:"NA",Continent:"North America"},TV:{Country:"Tuvalu",ContinentCode:"OC",Continent:"Oceania"},UG:{Country:"Uganda",ContinentCode:"AF",Continent:"Africa"},UA:{Country:"Ukraine",ContinentCode:"EU",Continent:"Europe"},AE:{Country:"United Arab Emirates",ContinentCode:"AS",Continent:"Asia"},GB:{Country:"United Kingdom",ContinentCode:"EU",Continent:"Europe"},US:{Country:"United States",ContinentCode:"NA",Continent:"North America"},UY:{Country:"Uruguay",ContinentCode:"SA",Continent:"South America"},UM:{Country:"US Minor Outlying Islands",ContinentCode:"OC",Continent:"Oceania"},VI:{Country:"US Virgin Islands",ContinentCode:"NA",Continent:"North America"},UZ:{Country:"Uzbekistan",ContinentCode:"AS",Continent:"Asia"},VU:{Country:"Vanuatu",ContinentCode:"OC",Continent:"Oceania"},VE:{Country:"Venezuela",ContinentCode:"SA",Continent:"South America"},VN:{Country:"Viet Nam",ContinentCode:"AS",Continent:"Asia"},WF:{Country:"Wallis and Futuna",ContinentCode:"OC",Continent:"Oceania"},EH:{Country:"Western Sahara",ContinentCode:"AF",Continent:"Africa"},YE:{Country:"Yemen",ContinentCode:"AS",Continent:"Asia"},ZM:{Country:"Zambia",ContinentCode:"AF",Continent:"Africa"},ZW:{Country:"Zimbabwe",ContinentCode:"AF",Continent:"Africa"}}},api:{token:function(){return"undefined"!=typeof $.cookie("access_token")?$.cookie("access_token"):$.cookie("access_token",window.location.hash.replace("#access_token=",""))},data:{place:function(e,n){e=1===e.length&&e.is("form")?form.find("input,textarea,select,[data-name]").not("[data-noplace]"):e.not("[data-noplace]"),"string"==typeof n&&(n=$.parseJSON(n));for(var t in n){var a=n[t],o=a;if("string"==typeof a&&(o=a.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(n)})),field=e.filter('[name="'+t+'"]').not("[data-noplace]"),element=e.filter('[data-name="'+t+'"]').not("[data-noplace]"),"undefined"!=typeof element&&element.text(o),"undefined"!=typeof field)if(field.is("input[type=radio]"))e.filter('[name="'+t+'"]').filter(function(){return $(this).is('[value="'+o+'"]')}).attr("checked","checked").prop("checked",!0);else if(field.is("input[type=checkbox]")){o=o.split(",");for(var i=0;i<o.length;i++)e.filter('[name="'+t+'"]').filter('[value="'+o[i]+'"]').attr("checked","checked").prop("checked",!0)}else field.is("input[type=text],textarea")&&field.val(o)}}},file:{get:function(e){return"undefined"!=typeof e&&e.length>1?("/"===e.charAt(0)&&e.slice(1,e.length-1),"/"===e.charAt(e.length-1)&&e.slice(0,-1),$.ajax({url:"/api/v2/admin/sites/current/storage/"+e,type:"GET",connection:"keep-alive",contentType:"application/json",headers:{Authorization:bcpie.api.token()},async:!1}).responseText):"no filename provided"},save:function(e,n){return"/"===e.charAt(0)&&e.slice(1,e.length-1),"/"===e.charAt(e.length-1)&&e.slice(0,-1),$.ajax({url:"/api/v2/admin/sites/current/storage/"+e+"?version=draft-publish",type:"PUT",headers:{Authorization:bcpie.api.token()},contentType:"application/octet-stream",async:!1,data:n,processData:!1})},"delete":function(e){return"/"===e.charAt(0)&&e.slice(1,e.length-1),"/"===e.charAt(e.length-1)&&e.slice(0,-1),$.ajax({url:"/api/v2/admin/sites/current/storage/"+e,type:"DELETE",headers:{Authorization:bcpie.api.token()}})}},webapp:{item:{get:function(e,n){return $.ajax({url:"/api/v2/admin/sites/current/webapps/"+e+"/items/"+n,headers:{Authorization:bcpie.api.token()},contentType:"application/json",async:!1}).responseJSON},place:function(e,n,t,a){var o=bcpie.api.webapp.item.get(n,t);bcpie.api.data.place(e,o),bcpie.api.data.place(e,o.fields),"undefined"!=typeof a&&a(o)},save:function(e,n,t){var a,o="/api/v2/admin/sites/current/webapps/"+n+"/items",i="POST",r=e.serializeObject();$.ajax({url:"/api/v2/admin/sites/current/webapps/"+n+"/fields",type:"get",async:!1,contentType:"application/json",headers:{Authorization:bcpie.api.token()}}).done(function(e){a={name:"",releaseDate:moment().subtract(12,"hour").format("YYYY-MM-DD"),expiryDate:"9999-01-01",enabled:!0,country:"US",fields:{}},allFields={name:"",weight:0,releaseDate:moment().subtract(12,"hour").format("YYYY-MM-DD"),expiryDate:"9999-01-01",enabled:!0,slug:"",description:"",roleId:null,submittedBy:-1,templateId:-1,address:"",city:"",state:"",zipCode:"",country:"",fields:{}},"undefined"!=typeof t&&""!==t&&(o=o+"/"+t,i="PUT",delete a.releaseDate);for(var n=0;n<e.items.length;n++)"undefined"!=typeof r[e.items[n].name]&&(a.fields[e.items[n].name]="");for(var s in r)"undefined"!=typeof allFields[s]?a[s]=r[s]:"undefined"!=typeof a.fields[s]&&(a.fields[s]=r[s]);$.ajax({url:o,type:i,connection:"keep-alive",contentType:"application/json",headers:{Authorization:bcpie.api.token()},data:JSON.stringify(a),async:!1})})},"delete":function(e,n){$.ajax({url:"/api/v2/admin/sites/current/webapps/"+e+"/items/"+n,type:"DELETE",connection:"keep-alive",contentType:"application/json",headers:{Authorization:bcpie.api.token()}})}}}},frontend:{webapp:{item:{"new":function(e,n,t,a){$.ajax({url:"/CustomContentProcess.aspx?CCID="+e+"&OTYPE=1",type:"POST",data:n,success:function(e){"undefined"!=typeof t&&t(e)},error:function(e){"undefined"!=typeof a&&a(e)}})},update:function(){}},search:function(e,n,t,a){var o=$.ajax({url:"/Default.aspx?CCID="+e+"&FID="+n+"&ExcludeBoolFalse=True&PageID="+t,type:"POST",data:a,async:!1});return $(o.responseText).find(".webappsearchresults").children()}},crm:{update:function(e,n,t){$.ajax({url:"/MemberProcess.aspx",type:"POST",data:e,success:function(e){"undefined"!=typeof n&&n(e)},error:function(e){"undefined"!=typeof t&&t(e)}})}}},utils:{_jsonify_brace:/^[{\[]/,_jsonify_token:/[^,:{}\[\]]+/g,_jsonify_quote:/^['"](.*)['"]$/,_jsonify_escap:/(["])/g,escape:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},jsonify:function(e){return e=$.trim(e),bcpie.utils._jsonify_brace.test(e)===!1&&(e="{"+e+"}"),e.replace(bcpie.utils._jsonify_token,function(e){return e=$.trim(e),""===e||"true"===e||"false"===e||"null"===e||!isNaN(parseFloat(e))&&isFinite(e)?e:'"'+e.replace(bcpie.utils._jsonify_quote,"$1").replace(bcpie.utils._jsonify_escap,"\\$1")+'"'})},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},serializeObject:function(e){for(var n={},t=e.serializeArray(),a=0;a<t.length;a++)void 0!==n[t[a].name]?(n[t[a].name].push||(n[t[a].name]=[n[t[a].name]]),n[t[a].name].push(t[a].value||"")):n[t[a].name]=t[a].value||"";return n},closestChildren:function(e,n,t,a){var o=e instanceof jQuery?e.children():$(e).children();return 0===o.length?"object"==typeof a?a:$():(a="object"==typeof a?a.add(o.filter(n)):o.filter(n),t!==!0?a.length>0?a:o.closestChildren(n):bcpie.utils.closestChildren(o.not(a),n,t,a))},searchArray:function(e,n){for(var t=0;t<e.length;t++)if(e[t]===n)return t;return-1}},extensions:{settings:function(e,n,t){return"string"==typeof t.name&&"run"!==t.name.toLowerCase()&&"settings"!==t.name.toLowerCase()?("undefined"==typeof t.defaults&&(t.defaults={}),e.data("bcpie-"+t.name.toLowerCase()+"-settings",$.extend({},t.defaults,n,bcpie.globals)),bcpie.active.tricks[t.name]=t.version,e.data("bcpie-"+t.name.toLowerCase()+"-settings")):void 0},engine:function(){function e(e){switch(e.toLowerCase()){case"true":return!0;case"false":return!1;default:return e}}var n,t,a,o,i=bcpie.extensions.tricks,r=[],s="",t={},C=[],l={},u={};for(n in i){r=[],s="",t={},C=[],l={},u={},a=$(doc).find("[data-bcpie-"+n.toLowerCase()+"]");for(var c=0;c<a.length;c++){if(t={},o=$(a[c]),s=o.data("bcpie-"+n.toLowerCase()),"string"==typeof s&&s.indexOf(":")>-1)if(s.indexOf(";")>-1){s=s.split(";");for(var d=0;d<s.length;d++)r=s[d].split(":"),t[$.trim(r[0])]=e($.trim(r.slice(1).join(":")))}else r=s.split(":"),t[$.trim(r[0])]=e($.trim(r.slice(1).join(":")));bcpie.extensions.tricks[n](o,t)}}},tricks:{}}},bcpie.globals=$.extend({},bcpie.globals,globals),$(function(){bcpie.extensions.engine()}),bcpie.extensions.tricks.ActiveNav=function(e,n){function t(e){return{names:e,selector:"."+e.replace(/ /g,".")}}function a(n,t){for(var a=0,o=$(n).size();o>a;a++){var i=n[a];$(i).parentsUntil(t,"li").addClass(h.activeClass.names),$(i).closest(t).children("ul").addClass(h.levelClass.names)}h.level>1&&h.levelTitle!==!1&&($(h.levelClass.selector).parent("li").addClass(h.levelTitleClass.names),h.levelTitle!==!1&&h.unlinkTitle!==!1&&$(h.levelTitleClass.selector).children("a").replaceWith("<span>"+$(h.levelTitleClass.selector).children("a").html()+"</span>")),h.level>1&&h.removeHidden===!0&&(h.levelTitle!==!1?(f=$(h.levelTitleClass.selector).detach(),e.children("ul").html(f)):(f=e.find(h.levelClass.selector).detach(),e.html(f)))}function o(e){h.activeHash&&history.pushState({},"",e)}function i(e){h.hash=null!==e?e:win.location.hash,m=h.hash,h.pathArray=$.grep(h.pathArray,function(e){return-1==e.indexOf("#")||e==h.hash}),r()}function r(){l=h.path.toLowerCase()+h.hash.toLowerCase(),e.find(h.activeClass.selector).removeClass(h.activeClass.names),""!==h.hash&&h.pathArray.push(h.hash.toLowerCase());for(var n=h.pathArray.length-1;n>=0&&(u=d.find("a").filter(function(){return c=$(this).attr("href").split("?")[0].toLowerCase().replace("https:","").replace("http:","").replace(h.primaryDomain,"").replace(h.secureDomain,""),0!==c.indexOf("/")&&(c="/"+c),c===l?(y=1,!0):void 0}),1!==y);n--)l=l.replace(h.pathArray[n],"");u.length>1&&(u=u.filter(function(){if(l=h.path.toLowerCase(),"/"===h.path)return!0;for(var e=h.pathArray.length-1;e>=0;e--){if(c=$(this).attr("href").split("?")[0].toLowerCase(),c===l)return!0;""!==l&&(l=l.replace(h.pathArray[e],""))}})),u.length>0?(a(u,d,p),$.trim(h.removeClass.names).length>0&&e.find(h.removeClass.selector).addBack().removeClass(h.removeClass.names)):0===e.find(h.levelClass.selector).size()&&(h.level>1?e.children("ul").remove():e.children("ul").addClass(h.levelClass.names))}function s(e){var n=$(win).scrollTop(),t=n+$(win).height(),a=$(e).offset().top;return a>t}function C(e){var n=$(win).scrollTop(),t=$(e).offset().top,a=t+$(e).height();return a>n&&n>t-h.hashOffset}var l,u,c,d,f,p,m,h=bcpie.extensions.settings(e,n,{name:"ActiveNav",version:"2015.01.31",defaults:{navClass:"activenav",activeClass:"active",level:1,levelClass:"level",lastLevel:0,lastLevelClass:"lastlevel",levelTitle:!1,levelTitleClass:"leveltitle",unlinkTitle:!1,removeHidden:!0,activeHash:!1,hashSupport:!0,hashOffset:30,removeClass:""}}),y=0;if(h.navClass=t(h.navClass),h.activeClass=t(h.activeClass),h.levelClass=t(h.levelClass),h.lastLevelClass=t(h.lastLevelClass),h.levelTitleClass=t(h.levelTitleClass),h.removeClass=t(h.removeClass),h.primaryDomain=h.primaryDomain.replace("http:",""),h.secureDomain=h.secureDomain.replace("https:",""),$(win).off("hashchange"),$(win).on("hashchange",function(){i()}),h.hashSupport){m=h.hash;for(var A=e.find('a[href*="'+h.path+'#"]'),v=0,g=$(A).size();g>v;v++)$("#"+$(A[v]).attr("href").split("#")[1]).addClass("hash");$(doc).off("scroll.ActiveNav"),$(doc).on("scroll.ActiveNav",function(){for(var e=0,n=body.find(".hash").size();n>e;e++){var t=win.pageYOffset,a=$(body.find(".hash")[e]),r=(t-a.offset().top,a.attr("id"));!C(a)||m==r&&0!==m.length||(m="#"+r,i(m),o("#"+r))}$(".hash").size()>0&&s($(".hash")[0])&&(m="",i(m),o("#"))})}if(e.addClass(h.navClass.names),d=$(e),h.level>1)for(var v=h.level-1;v>0;v--)d=bcpie.utils.closestChildren(d,"li",!0);if(h.lastLevel>0){p=$(e);for(var v=h.lastLevel;v>0;v--)p=bcpie.utils.closestChildren(p,"li",!0)}else p=0;$(p).parent("ul").addClass(h.lastLevelClass.names),0!==p&&h.removeHidden===!0&&bcpie.utils.closestChildren(e.find(h.lastLevelClass.selector),"ul",!0).remove(),r()},bcpie.extensions.tricks.Crumbs=function(e,n){function t(e,n,t,a){switch(n=t[e]){case"OrderRetrievev2.aspx":n="shopping cart";break;case"ForumRetrieve.aspx":n="forum";break;case"ForumRegister.aspx":n="forum registration";break;default:n=n}if(void 0!==a)switch(a[0]){case"?Step=13":n="checkout";break;default:n=n}return n}function a(e,n,t,a){return e=$(n).filter("#"+t).data(a)}function o(e,n,t,a,o,i){return t=e<n.length-1?'<a href="'+a+'">'+o+"</a>"+i:'<span class="this_crumb">'+o+"</span>"}var i,r,s,C,l,u,c,d=bcpie.extensions.settings(e,n,{name:"Crumbs",version:"2015.01.31",defaults:{separator:"/",makespace:"-",ajax:!0,showHome:!1,homeTitle:"Home"}}),f=" "+d.separator+" ",p="",m=0,h=d.ajax===!0||"true"===d.ajax?!0:!1;switch(i=d.pathArray,u=d.paramArray,c=d.path,C=new RegExp(d.makespace,"g"),l=c.replace(C," ").split("/"),l.shift(),d.showHome!==!1&&l.unshift(d.homeTitle),r=win.location.hostname,c){case"/ForumRetrieve.aspx":r+="/ForumRetrieve.aspx",i=u,d.param.contains("NoTemplate")&&i.pop();break;case"/FAQRetrieve.aspx":r+="/FAQRetrieve.aspx",i=u;break;default:i=i}if(h)for(;m<i.length;)r+=i[m],"/FAQRetrieve.aspx"===c&&0===m?r="/faq":m===i.length-1?p+='<span class="this_crumb">'+d.pageName+"</span>":$.ajax({url:r,type:"GET",dataType:"html",async:!1,success:function(e){d.pageAddress!==$(e).filter("#"+d.modulesID).data(d.pageAddressAttr)&&(s="/"===i[m]&&d.showHome!==!1&&null!==d.homeTitle?s:a(s,e,d.modulesID,d.pageNameAttr),p+=o(m,i,p,r,s,f))},error:function(e){404===e.status}}),m++;else for(;m<i.length;)r+=i[m],s="/"===i[m]&&d.showHome!==!1&&null!==d.homeTitle?s:t(m,s,l,u),p+=o(m,i,p,r,s,f),m++;return d.showHome===!0&&(p='<a href="/">'+d.homeTitle+"</a>"+f+p),p="<span>"+p+"</span>",e.html(p)},bcpie.extensions.tricks.Date=function(e,n){function t(){if("text"===a.ref&&e.is("input")&&(a.ref="value"),o="text"===a.ref?e.text():e.prop(a.ref),"now"===a.ref)i=moment();else if(""!==o){if("auto"===a.moment&&$.isNumeric(o)&&10===o.length)i=a.utc===!0?moment.utc(moment.unix(o)).local():moment.unix(o);else{switch("undefined"==typeof a.site.countryCode&&(a.site.countryCode="US"),a.countries[a.site.countryCode].ContinentCode){case"NA":C="MDY";break;default:C="DMY"}s="auto"===a.moment?moment.parseFormat(o,{preferredOrder:C}):a.moment,i=moment(o,s)}i.isAfter(moment())&&o.match(/(?:\/|-)([0-9]{2})$/)&&(i=i.subtract("year",100))}if(""!==a.timezone&&i.tz(a.timezone),"undefined"!=typeof i&&i._isAMomentObject===!0){i=i.add(a.add).subtract(a.subtract).format(a.format),r=a.target.split(",");for(var n=0;n<r.length;n++)"text"===r[n]&&e.is("input")&&(r[n]="value"),"text"===r[n]?e.text(i):e.prop(r[n],i)}}var a=bcpie.extensions.settings(e,n,{name:"Date",version:"2015.01.29",defaults:{format:"YYYY",add:"",subtract:"",moment:"auto",utc:!1,timezone:"",ref:"text",target:"text",event:"load"}});""!==a.add&&(a.add=$.parseJSON(bcpie.utils.jsonify(a.add))),""!==a.subtract&&(a.subtract=$.parseJSON(bcpie.utils.jsonify(a.subtract)));var o,i,r,s,C;t(),"load"!==a.event&&body.on(a.event,e,function(){t()})},bcpie.extensions.tricks.FormMagic=function(e,n){function t(e){if(!document.getElementById("RADEDITORSTYLESHEET0")){var n=document.createElement("script");n.setAttribute("src","/BcJsLang/ValidationFunctions.aspx?lang="+e),document.getElementsByTagName("head")[0].appendChild(n)}}function o(e,n){var t="";if(0===e.length)t="- "+n+O.Currency.MustNumber;else for(var a=0;a<e.length;a++){var o=e.charAt(a);("0">o||o>"9")&&"."!=o&&","!=o&&(t="- "+n+O.Currency.NoSymbol)}return t}function i(e,n){var t="";if(0===e.length)t="- "+n+O.Number.MustNumber;else{var a;for(a=0;a<e.length;a++){var o=e.charAt(a);if("0">o||o>"9")return t="- "+n+O.Number.NoDecimal}}return t}function r(e,n){var t="";return 0===e.trim().length&&(t=O.Enter.PleaseEnter+n+"\n"),t}function s(e,n){var t="";return null===e&&(e=""),(0===e.length||" "==e||""===e)&&(t=O.Select.PleaseSelect+n+"\n"),t}function C(e){var n="";if(e.length>0){var t=/^[^@]+@[^@]+\.[^@]{2,6}$/;if(t.test(e)){var a=/[\+\(\)\<\>\,\;\:\\\"\[\]]/;e.match(a)&&(n=O.Email.Illegal)}else n=O.Email.ValidEmail}else n=O.Email.ValidEmail;return n}function l(e,n){var t="- "+n+O.Select.MustSelect;if(e.length>0)for(var a=0;a<e.length;a++)e[a].disabled===!1&&e[a].checked===!0&&(t="");else e.disabled===!1&&e.checked===!0&&(t="");return t}function u(e,n){var t="";return 0===e.length?t=O.Enter.PleaseEnter+n+O.CheckDate.ValidDate:t}function c(e,n,t){var a=d();if(a){var o=t?"POST":"GET";return a.open(o,e,!1),a.setRequestHeader("User-Agent","XMLHTTP/1.0"),t&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(t),200===a.status?a.responseText:void 0}}function d(){for(var e=!1,n=0;n<I.length;n++){try{e=I[n]()}catch(t){continue}break}return e}function f(e){e._CaptchaHookedUp||e.CaptchaV2&&e.CaptchaHV2&&(e._CaptchaHookedUp=!0)}function p(e,n,t){if(e._CaptchaTextValidated===!0&&e._CaptchaTextIsInvalid===!1)return"";if("undefined"!=typeof e.ReCaptchaChallenge){var a=Recaptcha.get_challenge(),o=Recaptcha.get_response();if(0===o.trim().length)return"- "+n;e.ReCaptchaAnswer.value=Recaptcha.get_response(),e.ReCaptchaChallenge.value=Recaptcha.get_challenge();var i=c("/ValidateCaptcha.ashx?key="+a+"&answer="+o+"&imageVerificationType=recaptcha");e._CaptchaTextIsInvalid="false"==i,e._CaptchaTextValidated=!0,e._CaptchaTextIsInvalid&&m(e)}else{var a=$(e).find("[name=CaptchaHV2]").val(),o=$(e).find("[name=CaptchaV2]").val(),r=6;if(0===o.trim().length)return"- "+n;if(o.length!=r)e._CaptchaTextIsInvalid=!0;else{var i=c("/ValidateCaptcha.ashx?key="+a+"&answer="+o);e._CaptchaTextIsInvalid="false"==i,e._CaptchaTextValidated=!0,e._CaptchaTextIsInvalid&&m(e)
}}return e._CaptchaTextIsInvalid?"- "+t:""}function m(e){if(e._CaptchaTextValidated=!1,e._CaptchaTextIsInvalid=!0,"undefined"!=typeof e.ReCaptchaChallenge)Recaptcha.reload();else{var n=c("/CaptchaHandler.ashx?Regenerate=true&rand="+Math.random());e.CaptchaHV2.value=n,e.CaptchaV2.value="";var t=e.getElementsByTagName("img");0===t.length&&"p"==e.parentNode.nodeName.toLowerCase()&&e.parentNode.nextSibling&&"table"==e.parentNode.nextSibling.nodeName.toLowerCase()&&"webform"==e.parentNode.nextSibling.className&&(t=e.parentNode.nextSibling.getElementsByTagName("img"));for(var a=0;a<t.length;a++){var o=t[a].src,i=o.toLowerCase();if(i.indexOf("/captchahandler.ashx")>-1){var r=i.indexOf("?id=")+4,s=i.indexOf("&",r),C=o.substring(r,s),l=o.replace(C,n);t[a].src=l;break}}}}function h(e,n){var t="";if("inline"==e.style.display)if(0===e.value.length)t="- "+n+O.Number.MustNumber;else{var a;for(a=0;a<e.value.length;a++){var o=e.value.charAt(a);if("0">o||o>"9")return t="- "+n+O.Number.NoDecimal}}return t}function y(n,t,a){var c=!1;if(0===t&&(X=0),n.value=void 0===n.field.val()?"":n.field.val(),"text"===n.type||"hidden"===n.type||"password"===n.type)switch(n.name){case"EmailAddress":n.type="email";break;case"Friend01":n.type="email";break;case"Friend02":n.type="email";break;case"Friend03":n.type="email";break;case"Friend04":n.type="email";break;case"Friend05":n.type="email";break;case"DOB":n.type="date";break;case"Anniversary1":n.type="date";break;case"Anniversary2":n.type="date";break;case"Anniversary3":n.type="date";break;case"Anniversary4":n.type="date";break;case"Anniversary5":n.type="date";break;case"Anniversary5":n.type="date";break;case"CaptchaV2":n.type="captcha";break;case"CardNumber":n.type="number";break;case"CardCCV":n.type="number";break;case"Amount":n.type="currency";break;case"Password":n.type="password";break;case"PasswordConfirm":n.type="passwordconfirm";break;case"Days":n.type="days";break;default:n.type="text"}for(var d=0;d<w.customErrorFields.length;d++){if(n.field.is(w.customErrorFields[d])){sn=!0;break}sn=!1}if(sn===!0&&""!==w.customError)$.when(g(win[w.customError],n)).then(function(e){n.message="undefined"==typeof e?"":e});else switch(n.type){case"select":n.message=s(n.value,n.label);break;case"radio":n.message=l(e.find('[name="'+n.name+'"]'),n.label);break;case"checkbox":n.message=l(e.find('[name="'+n.name+'"]'),n.label);break;case"email":n.message=C(n.value);break;case"date":n.message=u(n.value,n.label);break;case"password":n.message=""!==n.value&&n.value.length<6?"- Password must be 6 characters or longer":r(n.value,n.label),J.value=n.value,J.label=n.label;break;case"passwordconfirm":n.message=J.value.length>0&&J.value!==n.value?J.label+" and "+n.label+" do not match":"";break;case"captcha":n.message=p(e[0],"Enter Word Verification in box","Please enter the correct Word Verification as seen in the image");break;case"currency":n.message=o(n.value,n.label);break;case"number":n.message=i(n.value,n.label);break;case"days":n.message=h(n.field,n.label);break;default:n.message=r(n.value,n.label)}if(n.message=n.message.replace("- ","").replace("\n",""),""!==n.message&&X++,"alert"===w.validateMode)""!==n.message&&(1===X?Z="- "+n.message+"\n":Z+="- "+n.message+"\n"),t===a-1&&0!==X&&alert(Z);else if("inline"===w.validateMode){switch(n.type){case"radio":L=e.find('label[for="'+n.name+'"]'),c=!0;break;case"checkbox":L=e.find('label[for="'+n.name+'"]'),c=!0;break;case"captcha":L=e.find("#recaptcha_widget_div").length>0?e.find("#recaptcha_widget_div"):n.field;break;default:L=n.field}R=L.parent().is(w.errorGroupElement+"."+w.errorGroupClass)?!0:!1,""!==n.message?R?L.siblings(w.errorMessageElement+"."+w.errorClass).text(n.message):(_="<"+w.errorMessageElement+' class="'+w.errorClass+'">'+n.message+"</"+w.errorMessageElement+">",L.addClass(w.errorClass).wrap(q),c&&e.find('[name="'+n.name+'"]').addClass(w.errorClass),L.parent().append(_)):R&&(L.siblings(w.errorMessageElement+"."+w.errorClass).remove(),L.removeClass(w.errorClass).unwrap(),c&&e.find('[name="'+n.name+'"]').removeClass(w.errorClass))}}function A(n){var t=e.find('[type="submit"]');switch(n){case"show":t.show();break;case"hide":t.hide();break;case"disable":t.attr("disabled","disabled");break;case"enable":t.removeAttr("disabled");break;default:t.show(),t.removeAttr("disabled")}}function v(n){return 0===n?(A(w.buttonOnSubmit),w.useAjax?$.ajax({type:"POST",url:W,data:e.serialize(),success:function(n){if(n.indexOf(w.systemMessageClass)>0){var t=$(n).find("."+w.systemMessageClass);D=$(t).size()>0?t:$(n).filter("."+w.systemMessageClass),b(e,D)}else if(n.indexOf(w.systemErrorMessageClass)>0){var t=$(n).find("."+w.systemErrorMessageClass);D=$(t).size()>0?t:$(n).filter("."+w.systemErrorMessageClass),b(e,D)}null!==w.ajaxSuccess&&g(window[w.ajaxSuccess],n)},error:function(e,n){return null!==w.ajaxError&&g(window[w.ajaxError],n),!1},complete:function(e,n){null!==w.ajaxComplete&&g(window[w.ajaxComplete],n),A(w.buttonAfterSubmit)}}):e.off("submit").submit(),n++):(alert("This form has already been submitted. Please refresh the page if you need to submit again."),!1)}function g(n,t){if("function"==typeof n){var a=$.Deferred();return a.resolve(t?n(e,t):n(e)),a.promise()}}function b(e,n){switch(G=$("#"+w.messageBoxID),"show"!==w.afterAjax&&e.fadeOut(0),w.messageMode){case"append":e.after(G);break;case"prepend":e.before(G);break;case"box":}0===n.html().replace(/\n/g,"").replace(/	/g,"").replace(/ /g,"").length&&w.restoreMessageBox===!0?n=rn:n.find(".search-results").length&&(n=n.find(".search-results").html()),G.html(n).fadeIn(),"remove"===w.afterAjax&&e.remove()}function S(n,t){Y[t]={name:n.attr("name"),field:n,type:n.is("input")?n.attr("type"):n.get(0).tagName.toLowerCase(),value:void 0===n.val()?"":n.val(),label:e.find('label[for="'+n.attr("name")+'"]').length>0?e.find('label[for="'+n.attr("name")+'"]').text():n.attr("placeholder")},void 0===Y[t].label&&(Y[t].label=Cn[Y[t].name])}function E(n,t){tn[t]={name:n.attr("name"),field:n,type:n.is("input")?n.attr("type"):n.get(0).tagName.toLowerCase(),value:void 0===n.val()?"":n.val(),label:e.find('label[for="'+n.attr("name")+'"]').length>0?e.find('label[for="'+n.attr("name")+'"]').text():n.attr("placeholder")},void 0===tn[t].label&&(tn[t].label=Cn[tn[t].name])}function N(){"1"==Q.filter(":checked").val()||en?e.find('[name="CardName"], [name="CardNumber"], [name="CardExpiryMonth"], [name="CardExpiryYear"], [name="CardType"], [name="CardCCV"]').addClass(w.requiredClass):e.find('[name="CardName"], [name="CardNumber"], [name="CardExpiryMonth"], [name="CardExpiryYear"], [name="CardType"], [name="CardCCV"]').removeClass(w.requiredClass),k()}function k(){var n=0,t=null;Y=[],U=e.find("input, select, button, textarea").filter("."+w.requiredClass);for(var a=0,o=U.size();o>a;a++){if(t=U[a],P=e.find('[name="'+$(t).attr("name")+'"]').not("."+w.requiredClass),P.length>0)for(var i=0,r=$(P).size();r>i;i++){var s=$(P[i]);s.addClass(w.requiredClass),S(s,n),n++}S($(t),n),n++}}function x(n){0===nn.length?(e.find(w.continueButton+","+w.backButton).hide(),e.find(w.submitField).show()):0===n?(e.find(w.submitField+", "+w.backButton).hide(),e.find(w.continueButton).show()):n==nn.length-1?(e.find(w.continueButton).hide(),e.find(w.submitField+", "+w.backButton).show()):(e.find(w.continueButton+","+w.backButton).show(),e.find(w.submitField).hide())}function T(n){if(x(n),n>nn.length-1)return void(n=nn.length-1);var t=nn[n];tn=[];for(var a=0,o=$(nn).size();o>a;a++)$(nn[a]).removeClass("activeContainer").hide();t.addClass("activeContainer").show(),n>0&&e.get(0).scrollIntoView()}function F(e){var n=nn[e];tn=[],U=n.find("input, select, button, textarea").filter("."+w.requiredClass);for(var t=0,a=0,o=$(U).size();o>a;a++){if(cn=U[a],P=n.find('[name="'+$(cn).attr("name")+'"]').not("."+w.requiredClass),P.length>0)for(var i=0,r=$(P).size();r>i;i++){var s=$(P[i]);s.addClass(w.requiredClass),E(s,t),t++}E($(cn),t),t++}}var w=bcpie.extensions.settings(e,n,{name:"FormMagic",version:"2015.01.31",defaults:{requiredClass:"required",errorGroupElement:"div",errorGroupClass:"error-group",errorMessageElement:"small",errorClass:"error",messageBoxID:bc.modulesID,messageMode:"prepend",restoreMessageBox:!0,afterAjax:"remove",useAjax:!1,validateMode:"alert",fieldTitleAttr:"label",systemMessageClass:"system-message",systemErrorMessageClass:"system-error-message",successClass:"success",submitEvent:null,submitField:'[type="submit"]',beforeSubmit:null,validationSuccess:null,validationError:null,noSubmit:!1,ajaxSuccess:null,ajaxError:null,ajaxComplete:null,multistep:!1,containers:"",continueButton:"",backButton:"",buttonOnSubmit:"disable",buttonAfterSubmit:"enable",customError:null,customErrorFields:""}});if("undefined"==typeof M)var M="EN";else"JP"==M&&(M="JA"),"CS"==M&&(M="CZ"),"SI"==M&&(M="SL"),t(M);if(void 0===O&&"EN"===M)var O={Currency:{MustNumber:" must be a number and cannot be empty\n",NoSymbol:" amount you entered must be a number without currency symbol\n"},Number:{MustNumber:" must be a number and cannot be empty\n",NoDecimal:" must be a number (no decimal points) and cannot be empty\n"},Float:{MustNumber:" must be a number and may contain a decimal point.\n"},Enter:{PleaseEnter:"- Please enter "},Select:{PleaseSelect:"- Please select ",MustSelect:" must be selected\n"},Email:{ValidEmail:"- Please enter a valid email address\n",Illegal:"- The email address contains illegal characters\n"},CheckDate:{ValidDate:" as a valid date.\n"},Others:{CannotContain:" cannot contain ",WhiteSpace:"white spaces\n",Character:"character.\n"},IP:{Illegal:"- Please enter a valid IP Address"}};String.prototype.trim=function(){return a=this.replace(/^\s+/,""),a.replace(/\s+$/,"")};for(var I=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],B=0;B<document.forms.length;B++)f(document.forms[B]);var U,P,L,D,_,G,H,R,j,V,z,W=e.attr("action"),Y=[],K=0,Z=[],q="<"+w.errorGroupElement+' class="'+w.errorGroupClass+'"></'+w.errorGroupElement+">",J={},X=0,Q=e.find('[name="PaymentMethodType"]'),en=!1,nn=[],tn=[],an=0,on=!1,rn=$("#"+w.messageBoxID).html(),sn=!1,Cn={Title:"Title",FirstName:"First Name",LastName:"Last Name",FullName:"Full Name",EmailAddress:"Email Address",Username:"Username",Password:"Password",HomePhone:"Home Phone Number",WorkPhone:"Work Phone Number",CellPhone:"Cell Phone Number",HomeFax:"Home Fax Number",WorkFax:"Work Fax Number",HomeAddress:"Home Address",HomeCity:"Home City",HomeState:"Home State",HomeZip:"Home Zip",HomeCountry:"Home Country",WorkAddress:"WorkAddress",WorkCity:"Work City",WorkState:"Work State",WorkZip:"Work Zip",WorkCountry:"Work Country",WebAddress:"Web Address",Company:"Company",DOB:"Date of Birth",PaymentMethodType:"Payment Method",BillingAddress:"Billing Address",BillingCity:"Billing City",BillingState:"Billing State",BillingZip:"Billing Zip Code",BillingCountry:"Billing Country",ShippingAddress:"Shipping Address",ShippingCity:"Shipping City",ShippingState:"Shipping State",ShippingZip:"Shipping Zip Code",ShippingCountry:"Shipping Country",ShippingInstructions:"Shipping Instructions",ShippingAttention:"Shipping Attention",Friend01:"Friend Email 1",Friend02:"Friend Email 2",Friend03:"Friend Email 3",Friend04:"Friend Email 4",Friend05:"Friend Email 5",Message:"Friend Message",Anniversary1Title:"Anniversary Title",Anniversary1:"Anniversary",Anniversary2Title:"Anniversary 2 Title",Anniversary2:"Anniversary 2",Anniversary3Title:"Anniversary 3 Title",Anniversary3:"Anniversary 3",Anniversary4Title:"Anniversary 4 Title",Anniversary4:"Anniversary 4",Anniversary5Title:"Anniversary 5 Title",Anniversary5:"Anniversary 5",FileAttachment:"File Attachment",CAT_Custom_1423_326:"Gender",CAT_Custom_1424_326:"Height",CAT_Custom_1425_326:"Marital Status",CAT_Custom_1426_326:"Has Children",CAT_Custom_1427_326:"Years in Business",CAT_Custom_1428_326:"Number of Employees",CAT_Custom_1429_326:"Annual Revenue",CAT_Custom_1430_326:"Financial Year",InvoiceNumber:"Invoice Number",CardName:"Name on Card",CardNumber:"Card Number",CardExpiryMonth:"Card Expiry Month",CardExpiryYear:"Card Expiry Year",CardType:"Card Type",CardCCV:"CCV Number",CaptchaV2:"Captcha"};""!==w.customErrorFields&&(w.customErrorFields=w.customErrorFields.split(",")),j=["FirstName","LastName","FullName","EmailAddress","CaptchaV2","ItemName"];for(var B=0;B<j.length;B++)j.field=e.find('[name="'+j[B]+'"]'),j.field.length>0&&j.field.not("."+w.requiredClass)&&j.field.addClass(w.requiredClass);if(1==Q.size()&&"1"==$(Q[0]).val()&&(en=!0),e.on("click",Q,N),w.multistep){var ln=w.containers.split(",");e.on("keypress",function(n){13==n.keyCode&&(n.preventDefault(),e.find(w.continueButton).filter(":visible").size()>0?e.find(w.continueButton).filter(":visible").trigger("click"):e.find('[type="submit"]:visible').trigger("click"))});for(var B=0,un=$(ln).size();un>B;B++){var cn=$(ln[B]);nn.push(cn)}e.on("click",w.continueButton,function(){F(an);for(var n=0;n<tn.length;n++)y(tn[n],n,tn.length);if(0===X&&T(++an),"inline"===w.validateMode&&tn.length>0)for(var n=0;n<tn.length;n++)e.off("change.multistep",tn[n].field),e.on("change.multistep",tn[n].field,function(){V=$(this).attr("name");for(var e=0;e<tn.length;e++)V===tn[e].name&&y(tn[e],0,1)})}),e.on("click",w.backButton,function(){T(--an)}),T(an)}e.on("submit",function(n){if(n.preventDefault(),N(),k(),on)return!1;on=!0;for(var t=0;t<Y.length;t++)y(Y[t],t,Y.length);if(0===X?(null!==w.beforeSubmit&&null===w.validationSuccess&&(w.validationSuccess=w.beforeSubmit),null!==w.validationSuccess?$.when(g(win[w.validationSuccess])).then(function(e){"stop"!==e&&w.noSubmit===!1&&v(K)}):w.noSubmit===!1&&v(K)):null!==w.validationError&&g(window[w.validationError]),"inline"===w.validateMode&&H!==!0&&(H=!0,Y.length>0))for(var t=0;t<Y.length;t++)e.on("change",'[name="'+Y[t].name+'"]',function(){V=$(this).attr("name");for(var e=0;e<Y.length;e++)V===Y[e].name&&y(Y[e],0,1)});on=!1}),'[type="submit"]'!==w.submitField&&(z=e.find(w.submitField),(z.length>0&&null!==w.submitEvent&&"keyup"===w.submitEvent||"blur"===w.submitEvent||"change"===w.submitEvent||"dblclick"===w.submitEvent)&&e.on(w.submitEvent,w.submitField,function(){e.submit()}))},bcpie.extensions.tricks.Foundation=function(e,n){var t=bcpie.extensions.settings(e,n,{name:"Foundation",version:"2015.01.31",defaults:{feature:null}});"topbar"===t.feature&&(e.find("li").filter(function(){return $(this).children("ul").length>0&&!$(this).is(".has-dropdown")}).addClass("has-dropdown"),e.find(".has-dropdown").filter(function(){return 0===$(this).children(".dropdown").length}).removeClass("has-dropdown"))},bcpie.extensions.tricks.SameAs=function(e,n){function t(e,n){"simple"==l.copyType||"alternate"==l.copyType?(C="text"===l.ref?n[0].is("select")?n[0].find("option").filter(":selected").text():n[0].is("radio")?n[0].find("option").filter(":checked").text():n[0].text():n[0].val(),C=0===C.length||(l.prefix.length>0||l.suffix.length>0)&&l.bothWays===!0?C:l.prefix+C+l.suffix):C=l.prefix+i()+l.suffix,e.is("select,textarea,input")?e.val(C):e.text(C),e.trigger(l.event+".sameAs").trigger(l.event)}function a(e,n){for(var a=n.length-1;a>=0;a--)$(n[a]).on(l.event+".sameAs",function(){t(e,n)});l.bothWays===!0&&e.on(l.event+".sameAs",function(){e.val()!==n[0].val()&&t(n[0],[e])})}function o(e,n,o){if(e.prop("checked"))e.attr(l.attributeType)==l.checkbox?p.removeAttr("checked"):e.attr(l.attributeType)==l.altCheckbox&&c.removeAttr("checked"),t(n,o),a(n,o);else{for(var i=o.length-1;i>=0;i--)o[i].off(l.event+".sameAs");n.off(l.event+".sameAs"),n.val("").trigger(l.event+".sameAs").trigger(l.event)}}function i(e){return s(e)}function r(e){return e.replace(/\+/g,"").replace(/\-/g,"").replace(/\//g,"").replace(/\*/g,"").replace(/\)/g,"").replace(/\(/g,"")}function s(e){function n(n){var t,a=-1,o=-1,i=0,r=n;for(t=0;t<n.length;t++){var s,C=n.charCodeAt(t);if(91!=C||-1!=a)if(1==i&&93==C&&a>-1)o=t,s=$("["+l.attributeType+'="'+n.substring(a+1,o)+'"]'),r=r.replace(n.substring(a,o+1),s.val()),e&&d.push(s),a=-1,o=-1,i=0;else if(C>=65&&90>=C||C>=97&&122>=C&&0===i){if(-1==a){a=t;continue}}else{if(!(0===i&&a>-1)||42!=C&&43!=C&&45!=C&&47!=C&&41!=C)continue;o=t-1,s=$("["+l.attributeType+'="'+n.substring(a,o+1)+'"]'),r=r.replace(n.substring(a,o+1),s.val()),e&&d.push(s),a=-1,o=-1}else a=t,i=1}if(a>-1){o=t;var u=$("["+l.attributeType+'="'+n.substring(a,o+1)+'"]');r=r.replace(n.substring(a,o+1),u.val()),e&&d.push(u)}return r}var t,a=l.copy;a=n(a);try{return"math"==l.copyType?(t=Parser.parse(a),t.evaluate()):r(a)}catch(o){return r(a)}}var C,l=bcpie.extensions.settings(e,n,{name:"SameAs",version:"2015.01.31",defaults:{bothWays:!1,attributeType:"name",clearOnUncheck:!0,copy:null,altCopy:null,checkbox:null,altCheckbox:null,breakOnChange:!1,prefix:"",suffix:"",copyType:"simple",scope:"form",event:"change",ref:"value"}}),u="form"===l.scope?e.closest("form"):body.find(l.scope),c=u.find("["+l.attributeType+"="+l.checkbox+"]"),d=[],f=[],p=u.find("["+l.attributeType+"="+l.altCheckbox+"]");"simple"==l.copyType?(l.copy=l.copy.replace(/\[/g,"").replace(/\]/g,""),d.push(u.find("["+l.attributeType+"="+l.copy+"]").not(e))):"alternate"==l.copyType?(l.bothWays=!1,l.copy=l.copy.replace(/\[/g,"").replace(/\]/g,""),l.altCopy=l.altCopy.replace(/\[/g,"").replace(/\]/g,""),d.push(u.find("["+l.attributeType+"="+l.copy+"]").not(e)),f.push(u.find("["+l.attributeType+"="+l.altCopy+"]").not(e))):(l.bothWays=!1,i(!0)),c.length||p.length?(c.length&&(o(c,e,d),c.on(l.event+".sameAs",function(){o(c,e,d)}),l.breakOnChange!==!1&&e.on("change",function(){c.off(l.event+".sameAs");for(var n=d.length-1;n>=0;n--)d[n].off(l.event+".sameAs");e.off(l.event+".sameAs")})),p.length&&(o(p,e,f),p.on(l.event+".sameAs",function(){o(p,e,f)}),l.breakOnChange!==!1&&e.on("change",function(){p.off(l.event+".sameAs");for(var n=f.length-1;n>=0;n--)f[n].off(l.event+".sameAs");e.off(l.event+".sameAs")}))):(t(e,d),a(e,d),l.breakOnChange!==!1&&e.on("change",function(){for(var n=d.length-1;n>=0;n--)d[n].off(l.event+".sameAs");e.off(l.event+".sameAs")}))},bcpie.extensions.tricks.Secure=function(e,n){function t(){if(u===!0){r=e.find("a").not('[href^="mailto:"]').not('[href="/LogOutProcess.aspx"]');for(var n=0;n<r.length;n++)s=$(r[n]).attr("href")||"",-1===s.indexOf("http")&&-1===s.indexOf("//")&&-1===s.indexOf("#")&&(s=0!==s.indexOf("/")?l.primaryDomain+"/"+s:l.primaryDomain+s,$(r[n]).attr("href",s))}}function a(){$.ajax({url:"/",type:"GET",success:function(e){$(e).filter("#bcmodules").data("bc-loginstatus")===!1&&(""!==l.sessionEndRedirect&&(win.location.href=l.primaryDomain+l.sessionEndRedirect),""!==l.onSessionEnd&&i(window[l.onSessionEnd]),clearInterval(C))}})}function o(){C=setInterval(function(){a()},9e5),$(win).on("focus",function(){a()})}function i(e){if("function"==typeof e){var n=$.Deferred();return n.resolve(e()),n.promise()}}var r,s,C,l=bcpie.extensions.settings(e,n,{name:"Secure",version:"2015.01.29",defaults:{unsecureLinks:!0,onSessionEnd:"",sessionEndRedirect:"",securePayments:!0}}),u=win.location.origin===l.secureDomain;l.securePayments===!0&&e.find('[name="Amount"]').length>0&&u===!1&&(win.location.href=l.secureDomain+l.pageAddress),(""!==l.onSessionEnd||""!==l.sessionEndRedirect)&&l.user.isLoggedIn===!0&&(a(),o()),l.unsecureLinks===!0&&t()},bcpie.extensions.tricks.ThemeClean=function(e,n){bcpie.extensions.settings(e,n,{name:"ThemeClean",version:"2015.01.28"});$("link").filter(function(){return $(this).attr("href").toLowerCase().indexOf(".css")>-1}).not(function(){return["modulestylesheets.css","theme.css"].indexOf($(this).attr("href").toLowerCase())>-1}).remove()},bcpie.extensions.tricks.Trigger=function(e,n){function t(){r.toggle===!0?(e.hasClass(r.onClass)&&""!==r.onClass?(e.removeClass(r.onClass),i(r.offCallback)):(e.addClass(r.onClass),i(r.onCallback)),e.hasClass(r.offClass)&&""!==r.offClass?(e.removeClass(r.offClass),i(r.onCallback)):(e.addClass(r.offClass),i(r.offCallback))):(e.addClass(r.onClass),i(r.onCallback))}function a(){for(var n=0,t=0;t<r.triggerValue.length;t++)o(s)==r.triggerValue[t]&&n++;n>0?(e.removeClass(r.offClass).addClass(r.onClass),i(r.onCallback)):(e.removeClass(r.onClass).addClass(r.offClass),i(r.offCallback))}function o(e){if("value"===r.triggerAttr){if(e.is("[type=radio]"))return e.filter(":checked").val();if(!e.is("[type=checkbox]"))return e.val();if(""===r.triggerValue&&e.filter(":checked").size()>0)return"";if(e.filter("[value='"+r.triggerValue+"']:checked").size()>0)return e.filter("[value='"+r.triggerValue+"']:checked").val()}else e.attr(r.triggerAttr)}function i(e){if(e.length>0){var n=window[e];if("function"==typeof n){var t=$.Deferred();return t.resolve(n()),t.promise()}}}var r=bcpie.extensions.settings(e,n,{name:"Trigger",version:"2015.01.29",defaults:{trigger:"",event:"click",triggerValue:"",triggerAttr:"value",onClass:"",offClass:"",toggle:!1,onCallback:"",offCallback:""}}),s=""===r.trigger?e:$(r.trigger);switch(r.triggerValue=r.triggerValue.split(","),r.event){case"change":a(),s.on(r.event,a);break;default:s.on(r.event,t)}};